<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Candidatos - VotoUni</title>
  <link rel="stylesheet" href="menu.css" />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f1f5f9;
    }

    .container {
      max-width: 1200px;
      margin: auto;
      padding: 40px 20px;
    }

    h1 {
      text-align: center;
      color: #003366;
      margin-bottom: 20px;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 40px;
      font-size: 1.1rem;
    }

    .lists-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 40px;
      margin-top: 40px;
    }

    .candidate-list {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      border-left: 6px solid #003366;
    }

    .list-header {
      text-align: center;
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
    }

    .list-number {
      background: #003366;
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: bold;
      margin: 0 auto 15px auto;
    }

    .list-name {
      color: #003366;
      font-size: 1.4rem;
      font-weight: bold;
      margin-bottom: 8px;
    }

    .list-slogan {
      color: #666;
      font-style: italic;
      font-size: 1rem;
    }

    .members-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .member-card {
      text-align: center;
      padding: 20px 15px;
      background: #f8f9fa;
      border-radius: 12px;
      transition: transform 0.3s ease;
    }

    .member-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .member-photo {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 50%;
      margin-bottom: 12px;
      border: 3px solid #003366;
    }

    .member-role {
      color: #003366;
      font-weight: bold;
      font-size: 0.9rem;
      margin-bottom: 5px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .member-name {
      color: #333;
      font-weight: 600;
      margin-bottom: 5px;
    }

    .member-course {
      color: #666;
      font-size: 0.85rem;
    }

    .list-proposal {
      margin-top: 25px;
      padding: 20px;
      background: #f0f8ff;
      border-radius: 10px;
      border-left: 4px solid #00aaff;
    }

    .proposal-title {
      color: #003366;
      font-weight: bold;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .proposal-text {
      color: #555;
      line-height: 1.6;
    }

    @media(max-width: 768px) {
      .lists-container {
        grid-template-columns: 1fr;
      }
      
      .members-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
      
      .container {
        padding: 20px 15px;
      }
    }
  </style>
</head>
<body>

  <div id="menu"></div>

  <div class="container">
    <h1 data-i18n="candidateListsTitle">Listas de Candidatos</h1>
    <p class="subtitle" data-i18n="candidateSubtitle">Conoce las propuestas y miembros de cada lista para el Consejo Estudiantil</p>

    <div id="lists-container" class="lists-container">
      <!-- Las listas se cargarán dinámicamente desde localStorage -->
    </div>
  </div>

  <script src="menu.js"></script>
  <script>
    /* ————————————————————————————  SISTEMA DE TRADUCCIONES  ———————————————————————————— */
    const translations = {
      es: {
        candidateListsTitle: "Listas de Candidatos",
        candidateSubtitle: "Conoce las propuestas y miembros de cada lista para el Consejo Estudiantil",
        president: "Presidente",
        vicePresident: "Vicepresidente",
        secretary: "Secretaria",
        treasurer: "Tesorero",
        mainProposals: "Propuestas Principales",
        proposal1: "• Mejora de áreas verdes y espacios recreativos<br>• Creación de club de tecnología y robótica<br>• Organización de actividades deportivas inter-cursos<br>• Implementación de buzón de sugerencias digital",
        proposal2: "• Biblioteca digital con recursos interactivos<br>• Torneos estudiantiles y competencias académicas<br>• Charlas motivacionales mensuales con invitados<br>• Plataforma digital para comunicación estudiantil",
        proposal3: "• Programa de reciclaje escolar integral<br>• Huerto estudiantil y educación ambiental<br>• Campañas de concientización ecológica<br>• Reducción del uso de plásticos en la institución",
        proposal4: "• Semana cultural anual con presentaciones<br>• Talleres de arte, música y teatro<br>• Inclusión de todas las expresiones estudiantiles<br>• App móvil para comunicación con docentes"
      },
      en: {
        candidateListsTitle: "Candidate Lists",
        candidateSubtitle: "Meet the proposals and members of each list for the Student Council",
        president: "President",
        vicePresident: "Vice President",
        secretary: "Secretary",
        treasurer: "Treasurer",
        mainProposals: "Main Proposals",
        proposal1: "• Improvement of green areas and recreational spaces<br>• Creation of technology and robotics club<br>• Organization of inter-course sports activities<br>• Implementation of digital suggestion box",
        proposal2: "• Digital library with interactive resources<br>• Student tournaments and academic competitions<br>• Monthly motivational talks with guests<br>• Digital platform for student communication",
        proposal3: "• Comprehensive school recycling program<br>• Student garden and environmental education<br>• Ecological awareness campaigns<br>• Reduction of plastic use in the institution",
        proposal4: "• Annual cultural week with presentations<br>• Art, music and theater workshops<br>• Inclusion of all student expressions<br>• Mobile app for communication with teachers"
      },
      id: {
        candidateListsTitle: "Daftar Kandidat",
        candidateSubtitle: "Kenali proposal dan anggota dari setiap daftar untuk Dewan Siswa",
        president: "Presiden",
        vicePresident: "Wakil Presiden",
        secretary: "Sekretaris",
        treasurer: "Bendahara",
        mainProposals: "Proposal Utama",
        proposal1: "• Perbaikan area hijau dan ruang rekreasi<br>• Pembuatan klub teknologi dan robotika<br>• Organisasi kegiatan olahraga antar kelas<br>• Implementasi kotak saran digital",
        proposal2: "• Perpustakaan digital dengan sumber daya interaktif<br>• Turnamen siswa dan kompetisi akademik<br>• Ceramah motivasi bulanan dengan tamu<br>• Platform digital untuk komunikasi siswa",
        proposal3: "• Program daur ulang sekolah yang komprehensif<br>• Kebun siswa dan pendidikan lingkungan<br>• Kampanye kesadaran ekologis<br>• Pengurangan penggunaan plastik di institusi",
        proposal4: "• Minggu budaya tahunan dengan presentasi<br>• Workshop seni, musik dan teater<br>• Inklusi semua ekspresi siswa<br>• Aplikasi mobile untuk komunikasi dengan guru"
      }
    };

    /* ————————————————————————————  IDIOMA ACTUAL  ———————————————————————————— */
    let currentLang = localStorage.getItem("lang") || "es";

    /* ————————————————————————————  GENERAR LISTAS DINÁMICAMENTE  ———————————————————————————— */
    function generateCandidatesList() {
      // Candidatos por defecto que siempre deben existir
      const defaultCandidates = [
        {
          numero: 1,
          nombre: "Lista \"Unión Estudiantil\"",
          slogan: "Juntos construimos el futuro",
          presidente: "Ana García",
          vicepresidente: "Carlos Mendoza",
          secretario: "María López",
          tesorero: "David Ruiz",
          photo: "perfilb.png",
          propuestas: [
            "Mejora de áreas verdes y espacios recreativos",
            "Creación de club de tecnología y robótica", 
            "Organización de actividades deportivas inter-cursos",
            "Implementación de buzón de sugerencias digital"
          ]
        },
        {
          numero: 2,
          nombre: "Lista \"Innovación Estudiantil\"",
          slogan: "Transformando la educación",
          presidente: "Luis Vargas",
          vicepresidente: "Sofia Torres",
          secretario: "Miguel Santos",
          tesorero: "Isabella Cruz",
          photo: "imagesd.png",
          propuestas: [
            "Biblioteca digital con recursos interactivos",
            "Torneos estudiantiles y competencias académicas",
            "Charlas motivacionales mensuales con invitados",
            "Plataforma digital para comunicación estudiantil"
          ]
        },
        {
          numero: 3,
          nombre: "Lista \"Verde y Futuro\"",
          slogan: "Por un colegio sostenible",
          presidente: "Camila Herrera",
          vicepresidente: "Andrés Morales",
          secretario: "Valeria Jiménez",
          tesorero: "Diego Castillo",
          photo: "perfilh.webp",
          propuestas: [
            "Programa de reciclaje escolar integral",
            "Huerto estudiantil y educación ambiental",
            "Campañas de concientización ecológica",
            "Reducción del uso de plásticos en la institución"
          ]
        },
        {
          numero: 4,
          nombre: "Lista \"Cultura y Arte\"",
          slogan: "Expresando nuestra identidad",
          presidente: "Roberto Vega",
          vicepresidente: "Daniela Flores",
          secretario: "Fernando Paz",
          tesorero: "Gabriela Rojas",
          photo: "perfilc.png",
          propuestas: [
            "Semana cultural anual con presentaciones",
            "Talleres de arte, música y teatro",
            "Inclusión de todas las expresiones estudiantiles",
            "App móvil para comunicación con docentes"
          ]
        }
      ];

      // Inicializar localStorage con candidatos por defecto si no existe
      if (!localStorage.getItem('candidates')) {
        localStorage.setItem('candidates', JSON.stringify(defaultCandidates));
      }

      // Obtener candidatos desde localStorage (que ya incluye los por defecto)
      const candidates = JSON.parse(localStorage.getItem('candidates'));

      const container = document.getElementById('lists-container');
      container.innerHTML = '';

      candidates.forEach(candidate => {
        const listDiv = document.createElement('div');
        listDiv.className = 'candidate-list';
        
        listDiv.innerHTML = `
          <div class="list-header">
            <div class="list-number">${candidate.numero}</div>
            <div class="list-name">${candidate.nombre}</div>
            <div class="list-slogan">"${candidate.slogan}"</div>
          </div>

          <div class="members-grid">
            <div class="member-card">
              <img src="${candidate.photo}" alt="Presidente" class="member-photo">
              <div class="member-role" data-i18n="president">Presidente</div>
              <div class="member-name">${candidate.presidente}</div>
              <div class="member-course">3ro BGU - A</div>
            </div>

            <div class="member-card">
              <img src="${candidate.photo}" alt="Vicepresidente" class="member-photo">
              <div class="member-role" data-i18n="vicePresident">Vicepresidente</div>
              <div class="member-name">${candidate.vicepresidente}</div>
              <div class="member-course">3ro BGU - B</div>
            </div>

            <div class="member-card">
              <img src="${candidate.photo}" alt="Secretario/a" class="member-photo">
              <div class="member-role" data-i18n="secretary">Secretario/a</div>
              <div class="member-name">${candidate.secretario}</div>
              <div class="member-course">2do BGU - A</div>
            </div>

            <div class="member-card">
              <img src="${candidate.photo}" alt="Tesorero/a" class="member-photo">
              <div class="member-role" data-i18n="treasurer">Tesorero/a</div>
              <div class="member-name">${candidate.tesorero}</div>
              <div class="member-course">2do BGU - C</div>
            </div>
          </div>

          <div class="list-proposal">
            <div class="proposal-title">
              <i class="bx bx-bulb"></i>
              <span data-i18n="mainProposals">Propuestas Principales</span>
            </div>
            <div class="proposal-text">
              ${candidate.propuestas.map(propuesta => `• ${propuesta}`).join('<br>')}
            </div>
          </div>
        `;
        
        container.appendChild(listDiv);
      });
    }

    /* ————————————————————————————  APLICAR TRADUCCIÓN  ———————————————————————————— */
    function applyTranslations() {
      console.log("🌐 Aplicando traducción en candidatos:", currentLang);
      
      // Traducir elementos con data-i18n
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        if (translations[currentLang] && translations[currentLang][key]) {
          el.innerHTML = translations[currentLang][key];
        }
      });
    }

    // Cargar menú dinámico basado en el rol del usuario
    const rolUsuario = localStorage.getItem("rolUsuario") || "usuario";
    const archivoMenu = (rolUsuario === "admin") ? "admin-menu.html" : "menu.html";
    
    fetch(archivoMenu)
      .then(res => res.text())
      .then(data => {
        document.getElementById("menu").innerHTML = data;
        // Generar listas de candidatos dinámicamente
        generateCandidatesList();
        // Aplicar traducciones después de cargar el menú y generar las listas
        applyTranslations();
        setTimeout(() => {
          applyTranslations();
        }, 100);
      })
      .catch(error => {
        console.error("Error cargando menú:", error);
        // Fallback al menú normal si hay error
        fetch("menu.html")
          .then(res => res.text())
          .then(data => {
            document.getElementById("menu").innerHTML = data;
            setTimeout(() => {
              applyTranslations();
            }, 100);
          });
      });

    /* ————————————————————————————  INICIALIZACIÓN  ———————————————————————————— */
    document.addEventListener("DOMContentLoaded", () => {
      applyTranslations();
      
      // Escuchar cambios de idioma
      window.addEventListener('storage', (e) => {
        if (e.key === 'lang') {
          currentLang = e.newValue || 'es';
          applyTranslations();
        }
      });
      
      console.log("✅ Candidatos inicializado con idioma:", currentLang);
    });

    // Aplicar traducciones inmediatamente
    applyTranslations();
  </script>

</body>
</html>
